const fs = require('fs');
const path = require('path');

// More translations batch 3
const translations = {
  // Common verbs and adjectives
  "気づく": "눈치채다",
  "気にする": "신경 쓰다",
  "気になる": "신경 쓰이다",
  "気をつける": "조심하다",
  "間に合う": "시간에 맞다",
  "役に立つ": "도움이 되다",
  "やり直す": "다시 하다",
  "見直す": "다시 보다",
  "見送る": "배웅하다",
  "見守る": "지켜보다",
  "見かける": "발견하다",
  "見慣れる": "익숙해지다",
  "見逃す": "놓치다",
  "思い出す": "기억해내다",
  "思い込む": "확신하다",
  "思いつく": "생각해내다",
  "思い切る": "결심하다",
  "言い出す": "말을 꺼내다",
  "言い訳": "변명",
  "話し合う": "상의하다",
  "話しかける": "말을 걸다",
  "聞き取る": "알아듣다",
  "聞き返す": "되묻다",
  "取り上げる": "다루다",
  "取り入れる": "도입하다",
  "取り組む": "착수하다",
  "取り消す": "취소하다",
  "取り除く": "제거하다",
  "引き受ける": "맡다",
  "引き出す": "끌어내다",
  "引き返す": "되돌아가다",
  "引っ越す": "이사하다",
  "持ち上げる": "들어올리다",
  "持ち込む": "가져오다",
  "持ち出す": "가지고 나가다",
  "切り替える": "전환하다",
  "打ち合わせ": "회의",
  "打ち込む": "몰두하다",
  "追い付く": "따라잡다",
  "追い出す": "쫓아내다",
  "付き合う": "사귀다",
  "付け加える": "덧붙이다",
  "乗り換える": "갈아타다",
  "乗り込む": "승차하다",
  "乗り越える": "극복하다",
  "飛び出す": "뛰어나가다",
  "飛び込む": "뛰어들다",
  "走り回る": "뛰어다니다",
  "歩き回る": "걸어다니다",
  "振り返る": "돌아보다",
  "振り向く": "뒤돌아보다",
  "向き合う": "마주하다",
  "向かう": "향하다",
  "組み合わせる": "조합하다",
  "組み立てる": "조립하다",
  "立ち上がる": "일어서다",
  "立ち止まる": "멈춰 서다",
  "巻き込む": "말려들게 하다",
  "通り過ぎる": "지나가다",
  "追い越す": "추월하다",
  "盛り上がる": "고조되다",
  "盛り込む": "담다",
  "詰め込む": "가득 채우다",
  "埋め込む": "삽입하다",
  "吹き飛ばす": "날려버리다",
  "吸い込む": "빨아들이다",
  "吐き出す": "뱉어내다",
  "売り切れる": "매진되다",
  "売り出す": "판매하다",
  "買い込む": "사들이다",
  "申し込む": "신청하다",
  "呼び出す": "부르다",
  "呼びかける": "호소하다",
  "受け入れる": "받아들이다",
  "受け取る": "수령하다",
  "受け止める": "받아들이다",
  "受け継ぐ": "물려받다",
  "引き継ぐ": "인수하다",
  "繰り返す": "반복하다",
  "繰り広げる": "펼치다",
  "差し出す": "내밀다",
  "差し込む": "꽂다",
  "投げ出す": "내던지다",
  "拾い上げる": "주워 올리다",
  "積み重ねる": "쌓다",
  "送り届ける": "배달하다",
  "送り出す": "보내다",
  "届け出る": "신고하다",
  "払い戻す": "환불하다",
  "見渡す": "둘러보다",
  "眺める": "바라보다",
  "覗く": "들여다보다",
  "見つめる": "응시하다",
  "味わう": "맛보다",
  "嗅ぐ": "냄새 맡다",
  "囁く": "속삭이다",
  "叫ぶ": "외치다",
  "叩く": "두드리다",
  "撫でる": "쓰다듬다",
  "握る": "쥐다",
  "摑む": "잡다",
  "揺れる": "흔들리다",
  "揺する": "흔들다",
  "抱える": "안다",
  "抱く": "품다",
  "支える": "지탱하다",
  "包む": "감싸다",
  "縛る": "묶다",
  "結ぶ": "맺다",
  "繋ぐ": "연결하다",
  "解く": "풀다",
  "外れる": "빗나가다",
  "抜く": "빼다",
  "抜ける": "빠지다",
  "刺す": "찌르다",
  "折る": "접다",
  "折れる": "부러지다",
  "割る": "나누다",
  "割れる": "깨지다",
  "破る": "찢다",
  "破れる": "찢어지다",
  "潰す": "짓누르다",
  "潰れる": "무너지다",
  "溶かす": "녹이다",
  "溶ける": "녹다",
  "固まる": "굳다",
  "固める": "굳히다",
  "凍る": "얼다",
  "凍らせる": "얼리다",
  "沸かす": "끓이다",
  "沸く": "끓다",
  "蒸す": "찌다",
  "焦げる": "타다",
  "焦がす": "태우다",
  "腐る": "썩다",
  "枯れる": "시들다",
  "咲く": "피다",
  "散る": "흩어지다",
  "育つ": "자라다",
  "育てる": "기르다",
  "生える": "자라다",
  "伸びる": "늘어나다",
  "伸ばす": "늘리다",
  "縮む": "줄어들다",
  "縮める": "줄이다",
  "膨らむ": "부풀다",
  "膨らませる": "부풀리다",
  "溜まる": "쌓이다",
  "溜める": "모으다",
  "混ざる": "섞이다",
  "混ぜる": "섞다",
  "染まる": "물들다",
  "染める": "염색하다",
  "磨く": "닦다",
  "輝く": "빛나다",
  "光る": "빛나다",
  "反射する": "반사하다",
  "映る": "비치다",
  "映す": "비추다",
  "浮かぶ": "떠오르다",
  "浮かべる": "띄우다",
  "沈む": "가라앉다",
  "沈める": "가라앉히다",
  "流れる": "흐르다",
  "流す": "흘리다",
  "漏れる": "새다",
  "漏らす": "누설하다",
  "溢れる": "넘치다",
  "注ぐ": "붓다",
  "浸す": "담그다",
  "浸かる": "잠기다",
  "滴る": "떨어지다",
  "濡らす": "적시다",
  "乾く": "마르다",
  "乾かす": "말리다",
  "蒸発する": "증발하다",
  "凝縮する": "응축하다",
  "沸騰する": "끓다",
  "爆発する": "폭발하다",
  "燃える": "타다",
  "燃やす": "태우다",
  "煙る": "연기가 나다",
  "消す": "끄다",
  "消える": "사라지다",
  "現れる": "나타나다",
  "現す": "나타내다",
  "隠れる": "숨다",
  "隠す": "숨기다",
  "迷う": "헤매다",
  "惑う": "당황하다",
  "悩む": "고민하다",
  "苦しむ": "괴로워하다",
  "傷つく": "상처받다",
  "傷つける": "상처입히다",
  "痛む": "아프다",
  "痛める": "다치게 하다",
  "癒す": "치유하다",
  "癒える": "낫다",
  "眠る": "잠자다",
  "覚める": "깨다",
  "覚ます": "깨우다",
  "目覚める": "눈을 뜨다",
  "うなずく": "고개를 끄덕이다",
  "首を振る": "고개를 젓다",
  "頷く": "끄덕이다",
  "微笑む": "미소 짓다",
  "にらむ": "노려보다",
  "しかめる": "찌푸리다",
  "ため息をつく": "한숨 쉬다",
  "あくびをする": "하품하다",
  "くしゃみをする": "재채기하다",
  "咳をする": "기침하다",
  "吐く": "토하다",
  "転ぶ": "넘어지다",
  "滑る": "미끄러지다",
  "躓く": "걸려 넘어지다",
  "ぶつかる": "부딪치다",
  "衝突する": "충돌하다",
  "倒れる": "쓰러지다",
  "倒す": "쓰러뜨리다",
  "起こす": "일으키다",
  "寝かせる": "재우다",
  "横たわる": "눕다",
  "横になる": "눕다",
  "座り込む": "주저앉다",
  "蹲る": "웅크리다",
  "這う": "기다",
  "這い上がる": "기어오르다",
  "跳ぶ": "뛰다",
  "跳ねる": "튀다",
  "跳び上がる": "뛰어오르다",
  "滑り込む": "미끄러져 들어가다",
  "潜る": "잠수하다",
  "浮く": "뜨다",
  "泳ぐ": "수영하다",
  "漕ぐ": "젓다",
  "登る": "오르다",
  "降りる": "내리다",
  "上る": "오르다",
  "下る": "내려가다",
  "昇る": "오르다",
  "沈む": "가라앉다",
  "進む": "나아가다",
  "進める": "진행하다",
  "退く": "물러나다",
  "退ける": "물리치다",
  "遅れる": "늦다",
  "遅らせる": "지연시키다",
  "早める": "앞당기다",
  "急ぐ": "서두르다",
  "慌てる": "당황하다",
  "焦る": "조급해하다",
  "落ち着く": "침착하다",
  "静まる": "잠잠해지다",
  "騒ぐ": "떠들다",
  "荒れる": "거칠어지다",
  "暴れる": "날뛰다",
  "逃げる": "도망치다",
  "逃す": "놓치다",
  "追う": "쫓다",
  "追いかける": "쫓아가다",
  "捕まる": "잡히다",
  "捕まえる": "잡다",
  "逮捕する": "체포하다",
  "釈放する": "석방하다",
  "裁く": "재판하다",
  "罰する": "벌하다",
  "許す": "용서하다",
  "赦す": "사면하다",
  "従う": "따르다",
  "背く": "거스르다",
  "逆らう": "거역하다",
  "抵抗する": "저항하다",
  "服従する": "복종하다",
  "支配する": "지배하다",
  "統治する": "통치하다",
  "管理する": "관리하다",
  "監督する": "감독하다",
  "指揮する": "지휘하다",
  "命じる": "명령하다",
  "禁じる": "금지하다",
  "許可する": "허가하다",
  "認める": "인정하다",
  "否定する": "부정하다",
  "肯定する": "긍정하다",
  "賛成する": "찬성하다",
  "反対する": "반대하다",
  "批判する": "비판하다",
  "非難する": "비난하다",
  "称賛する": "칭찬하다",
  "褒める": "칭찬하다",
  "叱る": "꾸짖다",
  "怒鳴る": "호통치다",
  "責める": "비난하다",
  "詫びる": "사과하다",
  "謝る": "사과하다",
  "感謝する": "감사하다",
  "尊敬する": "존경하다",
  "軽蔑する": "경멸하다",
  "侮辱する": "모욕하다",
  "愛する": "사랑하다",
  "憎む": "미워하다",
  "恨む": "원망하다",
  "妬む": "질투하다",
  "羨む": "부러워하다",
  "願う": "원하다",
  "望む": "바라다",
  "期待する": "기대하다",
  "予想する": "예상하다",
  "予測する": "예측하다",
  "推測する": "추측하다",
  "推定する": "추정하다",
  "見積もる": "견적하다",
  "評価する": "평가하다",
  "判定する": "판정하다",
  "決定する": "결정하다",
  "決断する": "결단하다",
  "判断する": "판단하다",
  "誤解する": "오해하다",
  "理解する": "이해하다",
  "納得する": "납득하다",
  "把握する": "파악하다",
  "認識する": "인식하다",
  "意識する": "의식하다",
  "自覚する": "자각하다",
  "反省する": "반성하다",
  "後悔する": "후회하다",
  "満足する": "만족하다",
  "感動する": "감동하다",
  "感激する": "감격하다",
  "興奮する": "흥분하다",
  "動揺する": "동요하다",
  "緊張する": "긴장하다",
  "リラックスする": "릴랙스하다",
  "安心する": "안심하다",
  "心配する": "걱정하다",
  "不安になる": "불안해지다",
  "恐れる": "두려워하다",
  "怖がる": "무서워하다",
  "驚く": "놀라다",
  "呆れる": "어이없어하다",
  "がっかりする": "실망하다",
  "落胆する": "낙담하다",
  "絶望する": "절망하다",
  "諦める": "포기하다",
  "挫折する": "좌절하다",
  "努力する": "노력하다",
  "頑張る": "열심히 하다",
  "励む": "힘쓰다",
  "励ます": "격려하다",
  "応援する": "응원하다",
  "協力する": "협력하다",
  "提携する": "제휴하다",
  "連携する": "연계하다",
  "協調する": "협조하다",
  "競争する": "경쟁하다",
  "対抗する": "대항하다",
  "勝つ": "이기다",
  "負ける": "지다",
  "敗北する": "패배하다",
  "勝利する": "승리하다",
  "優勝する": "우승하다",
  "入賞する": "입상하다",
  "参加する": "참가하다",
  "出場する": "출전하다",
  "棄権する": "기권하다",
  "挑戦する": "도전하다",
  "試みる": "시도하다",
  "企てる": "기획하다",
  "計画する": "계획하다",
  "実行する": "실행하다",
  "実施する": "실시하다",
  "実現する": "실현하다",
  "達成する": "달성하다",
  "完成する": "완성하다",
  "完了する": "완료하다",
  "終了する": "종료하다",
  "中止する": "중지하다",
  "中断する": "중단하다",
  "再開する": "재개하다",
  "継続する": "계속하다",
  "持続する": "지속하다",
  "維持する": "유지하다",
  "保つ": "유지하다",
  "守る": "지키다",
  "保護する": "보호하다",
  "防ぐ": "막다",
  "避ける": "피하다",
  "回避する": "회피하다",
  "免れる": "면하다",
  "耐える": "견디다",
  "我慢する": "참다",
  "辛抱する": "인내하다",
  "克服する": "극복하다",
  "乗り越える": "극복하다",
  "解決する": "해결하다",
  "処理する": "처리하다",
  "対処する": "대처하다",
  "対応する": "대응하다",
  "適応する": "적응하다",
  "順応する": "순응하다",
  "慣れる": "익숙해지다",
  "習熟する": "숙달하다",
  "上達する": "상달하다",
  "向上する": "향상하다",
  "進歩する": "진보하다",
  "発展する": "발전하다",
  "成長する": "성장하다",
  "発達する": "발달하다",
  "進化する": "진화하다",
  "退化する": "퇴화하다",
  "衰退する": "쇠퇴하다",
  "滅びる": "멸망하다",
  "栄える": "번영하다",
  "繁栄する": "번영하다",
  "豊かになる": "풍요로워지다",
  "貧しくなる": "가난해지다",
  "富む": "부유하다",
  "恵まれる": "혜택받다",
  "施す": "베풀다",
  "寄付する": "기부하다",
  "支援する": "지원하다",
  "援助する": "원조하다",
  "助成する": "조성하다",
  "補助する": "보조하다",
  "補充する": "보충하다",
  "補う": "보충하다",
  "埋める": "메우다",
  "埋まる": "메워지다",
  "満たす": "채우다",
  "満ちる": "차다",
  "空く": "비다",
  "空ける": "비우다",
  "欠ける": "이지러지다",
  "欠く": "결여하다",
  "足りる": "충분하다",
  "足す": "더하다",
  "引く": "빼다",
  "掛ける": "곱하다",
  "割る": "나누다",
  "数える": "세다",
  "計る": "재다",
  "測る": "측정하다",
  "量る": "달다",
  "比較する": "비교하다",
  "対照する": "대조하다",
  "区別する": "구별하다",
  "識別する": "식별하다",
  "判別する": "판별하다",
  "分類する": "분류하다",
  "分析する": "분석하다",
  "解析する": "해석하다",
  "検討する": "검토하다",
  "検査する": "검사하다",
  "点検する": "점검하다",
  "確認する": "확인하다",
  "照合する": "대조하다",
  "調査する": "조사하다",
  "研究する": "연구하다",
  "調べる": "조사하다",
  "探る": "탐색하다",
  "探索する": "탐색하다",
  "発見する": "발견하다",
  "発明する": "발명하다",
  "開発する": "개발하다",
  "設計する": "설계하다",
  "設置する": "설치하다",
  "建設する": "건설하다",
  "建てる": "세우다",
  "組む": "짜다",
  "構成する": "구성하다",
  "構築する": "구축하다",
  "形成する": "형성하다",
  "生成する": "생성하다",
  "作成する": "작성하다",
  "製造する": "제조하다",
  "製作する": "제작하다",
  "生産する": "생산하다",
  "産出する": "산출하다",
  "出産する": "출산하다",
  "繁殖する": "번식하다",
  "増殖する": "증식하다",
  "増加する": "증가하다",
  "減少する": "감소하다",
  "消滅する": "소멸하다",
  "消失する": "소실하다",
  "喪失する": "상실하다",
  "失う": "잃다",
  "無くす": "잃어버리다",
  "無くなる": "없어지다",
  "亡くなる": "돌아가시다",
  "死亡する": "사망하다",
  "生存する": "생존하다",
  "存在する": "존재하다",
  "出現する": "출현하다",
  "発生する": "발생하다",
  "起こる": "일어나다",
  "起きる": "일어나다",
  "生じる": "생기다",
  "引き起こす": "일으키다",
  "招く": "초래하다",
  "もたらす": "가져오다",
  "影響する": "영향하다",
  "作用する": "작용하다",
  "機能する": "기능하다",
  "働く": "일하다",
  "動く": "움직이다",
  "活動する": "활동하다",
  "行動する": "행동하다",
  "振る舞う": "행동하다",
  "演じる": "연기하다",
  "演奏する": "연주하다",
  "表現する": "표현하다",
  "発表する": "발표하다",
  "公開する": "공개하다",
  "披露する": "피로하다",
  "展示する": "전시하다",
  "陳列する": "진열하다",
  "飾る": "장식하다",
  "装飾する": "장식하다",
  "塗る": "칠하다",
  "描く": "그리다",
  "書く": "쓰다",
  "記す": "기록하다",
  "記入する": "기입하다",
  "記録する": "기록하다",
  "登録する": "등록하다",
  "申請する": "신청하다",
  "提出する": "제출하다",
  "提案する": "제안하다",
  "提示する": "제시하다",
  "表示する": "표시하다",
  "示す": "보여주다",
  "指す": "가리키다",
  "指摘する": "지적하다",
  "指示する": "지시하다",
  "指導する": "지도하다",
  "教育する": "교육하다",
  "訓練する": "훈련하다",
  "練習する": "연습하다",
  "学習する": "학습하다",
  "学ぶ": "배우다",
  "習う": "배우다",
  "覚える": "외우다",
  "暗記する": "암기하다",
  "復習する": "복습하다",
  "予習する": "예습하다",
  "研修する": "연수하다",
  "留学する": "유학하다",
  "卒業する": "졸업하다",
  "入学する": "입학하다",
  "進学する": "진학하다",
  "編入する": "편입하다",
  "転校する": "전학하다",
  "退学する": "퇴학하다",
  "休学する": "휴학하다",
  "通学する": "통학하다",
  "通勤する": "통근하다",
  "出勤する": "출근하다",
  "退勤する": "퇴근하다",
  "就職する": "취직하다",
  "退職する": "퇴직하다",
  "転職する": "이직하다",
  "昇進する": "승진하다",
  "降格する": "강등하다",
  "解雇する": "해고하다",
  "雇用する": "고용하다",
  "採用する": "채용하다",
  "募集する": "모집하다",
  "応募する": "응모하다",
  "志願する": "지원하다",
  "面接する": "면접하다",
  "試験する": "시험하다",
  "テストする": "테스트하다",
  "合格する": "합격하다",
  "不合格になる": "불합격되다",
  "落第する": "낙제하다",
  "進級する": "진급하다"
};

function addTranslations(filePath) {
  let content = fs.readFileSync(filePath, 'utf8');
  let addedCount = 0;

  for (const [expression, korean] of Object.entries(translations)) {
    const escapedExpr = expression.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const pattern = new RegExp(
      `(\\{\\s*expression:\\s*['"]${escapedExpr}['"],\\s*reading:\\s*['"][^'"]+['"],\\s*meaning:\\s*['"][^'"]+['"])\\s*(\\})`,
      'g'
    );

    const newContent = content.replace(pattern, (match, prefix, suffix) => {
      if (match.includes('meaningKo')) return match;
      addedCount++;
      return `${prefix}, meaningKo: '${korean}' ${suffix}`;
    });

    content = newContent;
  }

  fs.writeFileSync(filePath, content);
  return addedCount;
}

const n5Path = path.join(__dirname, '../src/data/words/n5.ts');
const n4Path = path.join(__dirname, '../src/data/words/n4.ts');
const n3Path = path.join(__dirname, '../src/data/words/n3.ts');

const n5Added = addTranslations(n5Path);
const n4Added = addTranslations(n4Path);
const n3Added = addTranslations(n3Path);

console.log(`Added: N5=${n5Added}, N4=${n4Added}, N3=${n3Added}`);

function countKorean(filePath) {
  const c = fs.readFileSync(filePath, 'utf8');
  const total = (c.match(/expression:/g) || []).length;
  const withKo = (c.match(/meaningKo:/g) || []).length;
  return { total, withKo };
}

const n5Stats = countKorean(n5Path);
const n4Stats = countKorean(n4Path);
const n3Stats = countKorean(n3Path);

console.log(`N5: ${n5Stats.withKo}/${n5Stats.total} (${Math.round(n5Stats.withKo/n5Stats.total*100)}%)`);
console.log(`N4: ${n4Stats.withKo}/${n4Stats.total} (${Math.round(n4Stats.withKo/n4Stats.total*100)}%)`);
console.log(`N3: ${n3Stats.withKo}/${n3Stats.total} (${Math.round(n3Stats.withKo/n3Stats.total*100)}%)`);

const totalWords = n5Stats.total + n4Stats.total + n3Stats.total;
const totalKo = n5Stats.withKo + n4Stats.withKo + n3Stats.withKo;
console.log(`Overall: ${totalKo}/${totalWords} (${Math.round(totalKo/totalWords*100)}%)`);
