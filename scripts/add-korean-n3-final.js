const fs = require('fs');
const path = require('path');

// Final N3 translations
const n3Translations = {
  '左右': '좌우',
  '皿': '접시',
  '更に': '더욱',
  '猿': '원숭이',
  '騒ぎ': '소동',
  '酸性': '산성',
  '酸素': '산소',
  '氏': '씨',
  '詩': '시',
  '幸せ': '행복',
  'ジーンズ': '청바지',
  'ジェット機': '제트기',
  '四角': '사각형',
  '直に': '직접',
  'しかも': '게다가',
  '四季': '사계절',
  '直': '곧',
  '時期': '시기',
  '支給': '지급',
  '至急': '지급, 긴급',
  'しきりに': '자주',
  '資源': '자원',
  '事件': '사건',
  '時刻': '시각',
  '自殺': '자살',
  '支出': '지출',
  '事情': '사정',
  '詩人': '시인',
  '自身': '자신',
  '自然': '자연',
  '次第': '차례',
  'したがって': '따라서',
  '質': '질',
  '湿気': '습기',
  '実験': '실험',
  '実現': '실현',
  '湿度': '습도',
  'じっと': '가만히',
  '実に': '정말',
  '実は': '사실은',
  '失望': '실망',
  '指導': '지도',
  '自動': '자동',
  '児童': '아동',
  '支配': '지배',
  '芝居': '연극',
  'しばしば': '종종',
  '芝生': '잔디',
  '支払': '지불',
  '支払う': '지불하다',
  '死亡': '사망',
  '資本': '자본',
  '姉妹': '자매',
  '地味': '수수한',
  '示す': '나타내다',
  '占める': '차지하다',
  '湿る': '축축해지다',
  '霜': '서리',
  '借金': '빚',
  'しゃべる': '수다 떨다',
  '週': '주',
  '州': '주 (지역)',
  '宗教': '종교',
  '重視': '중시',
  '就職': '취직',
  'ジュース': '주스',
  '重体': '중태',
  '住宅': '주택',
  '首相': '수상',
  '出場': '출장',
  '出身': '출신',
  '主婦': '주부',
  '順': '순서',
  '瞬間': '순간',
  '使用': '사용',
  '小': '소',
  '章': '장',
  '賞': '상',
  '上': '상',
  '奨学金': '장학금',
  '乗客': '승객',
  '上京': '상경',
  '正午': '정오',
  '常識': '상식',
  '少女': '소녀',
  '少々': '조금',
  '症状': '증상',
  '生じる': '생기다',
  '状態': '상태',
  '上達': '향상',
  '冗談': '농담',
  '上等': '상등',
  '衝突': '충돌',
  '承認': '승인',
  '少年': '소년',
  '商売': '장사',
  '商品': '상품',
  '消防': '소방',
  '証明': '증명',
  '照明': '조명',
  '女子': '여자',
  '女王': '여왕',
  '職場': '직장',
  '徐々に': '서서히',
  '処分': '처분',
  '書物': '서적',
  '書類': '서류',
  '知る': '알다',
  '汁': '국물',
  '印': '도장, 표시',
  '進行': '진행',
  '人種': '인종',
  '人物': '인물',
  '人生': '인생',
  '人体': '인체',
  '新年': '신년',
  '信念': '신념',
  '審判': '심판',
  '辛抱': '인내',
  '進歩': '진보',
  '深夜': '심야',
  '信頼': '신뢰',
  '親類': '친척',
  '数': '수',
  '図': '그림',
  '随分': '꽤',
  '水分': '수분',
  '睡眠': '수면',
  '数字': '숫자',
  '姿': '모습',
  '少ない': '적은',
  '素敵': '멋진',
  'ストレス': '스트레스',
  '砂': '모래',
  '素早い': '빠른',
  'スピード': '속도',
  '全て': '모두',
  '成果': '성과',
  '政策': '정책',
  '成績': '성적',
  '清潔': '청결',
  '成長': '성장',
  '制度': '제도',
  '成分': '성분',
  '性別': '성별',
  '生命': '생명',
  '姓名': '성명',
  '精力': '정력',
  '世間': '세상',
  '世代': '세대',
  '世帯': '가구',
  '是非': '꼭',
  '狭い': '좁은',
  '攻める': '공격하다',
  '責める': '비난하다',
  '背負う': '업다',
  '世話': '돌봄',
  '宣言': '선언',
  '戦後': '전후',
  '先祖': '조상',
  '選択': '선택',
  '宣伝': '선전',
  '全般': '전반',
  '全部': '전부',
  '専門': '전문',
  '占領': '점령',
  'センス': '센스',
  '騒音': '소음',
  '増加': '증가',
  '創作': '창작',
  '操作': '조작',
  '捜査': '수사',
  '想像': '상상',
  '相続': '상속',
  '装置': '장치',
  '創造': '창조',
  '遭難': '조난',
  '相場': '시세',
  '総理': '총리',
  '創立': '창립',
  '属する': '속하다',
  '速度': '속도',
  '祖先': '조상',
  '組織': '조직',
  '育児': '육아',
  '卒業': '졸업',
  '率直': '솔직한',
  'そっくり': '꼭 닮은',
  'そっと': '살짝',
  '備える': '갖추다',
  '染める': '물들이다',
  '揃う': '갖추어지다',
  '揃える': '맞추다',
  '損': '손해',
  '存在': '존재',
  '尊敬': '존경',
  '損害': '손해',
  '体温': '체온',
  '退院': '퇴원',
  '大会': '대회',
  '体験': '체험',
  '大災害': '대재해',
  '対策': '대책',
  '大して': '그다지',
  '大臣': '장관',
  '態度': '태도',
  '大抵': '대개',
  '題名': '제목',
  '対立': '대립',
  '台無し': '엉망',
  '代理': '대리',
  '平ら': '평평한',
  '耐える': '견디다',
  '絶える': '끊어지다',
  '倒す': '쓰러뜨리다',
  '高': '높이',
  '滝': '폭포',
  '確かめる': '확인하다',
  '足す': '더하다',
  '助け': '도움',
  '畳む': '접다',
  '叩く': '두드리다',
  '戦う': '싸우다',
  '立ち止まる': '멈춰 서다',
  '建つ': '세워지다',
  '断つ': '끊다',
  '達する': '도달하다',
  '脱出': '탈출',
  '妥当': '타당한',
  '例': '예',
  '例える': '비유하다',
  '束': '다발',
  '魂': '영혼',
  '単位': '단위',
  '短期': '단기',
  '短所': '단점',
  '担当': '담당',
  '段階': '단계',
  '団体': '단체',
  '地位': '지위',
  '違い': '차이',
  '近づく': '가까워지다',
  '近づける': '가까이하다',
  '誓う': '맹세하다',
  '力': '힘',
  '地形': '지형',
  '知識': '지식',
  '地帯': '지대',
  '縮む': '줄어들다',
  '縮める': '줄이다',
  '秩序': '질서',
  '着実': '착실한',
  '着替える': '갈아입다',
  '茶': '차',
  '注ぐ': '붓다',
  '仲介': '중개',
  '中継': '중계',
  '忠告': '충고',
  '中止': '중지',
  '中心': '중심',
  '駐車': '주차',
  '中性': '중성',
  '注目': '주목',
  '長': '장',
  '調査': '조사',
  '長所': '장점',
  '貯金': '저금',
  '直接': '직접',
  '直前': '직전',
  '著者': '저자',
  '地理': '지리',
  '沈む': '가라앉다',
  '沈める': '가라앉히다',
  '追加': '추가',
  '通過': '통과',
  '通勤': '통근',
  '通常': '통상',
  '通信': '통신',
  '通知': '통지',
  '通訳': '통역',
  '通路': '통로',
  '使い道': '용도',
  '疲れ': '피로',
  '掴む': '잡다',
  '付き合い': '교제',
  '突く': '찌르다',
  '尽きる': '다하다',
  '尽くす': '다하다',
  '作り': '만듦',
  '告げる': '알리다',
  '漬ける': '담그다',
  '伝わる': '전해지다',
  '伝える': '전하다',
  '続き': '계속',
  '包む': '싸다',
  '繋がる': '연결되다',
  '繋げる': '연결하다',
  '粒': '알갱이',
  'つまり': '즉',
  '積む': '쌓다',
  '詰める': '채우다',
  '積もる': '쌓이다',
  '釣り合う': '균형 잡히다',
  '連れ': '동반자',
  '連れる': '데려가다',
  '定員': '정원',
  '抵抗': '저항',
  '訂正': '정정',
  '停電': '정전',
  '手入れ': '손질',
  '適する': '적합하다',
  '適度': '적당한',
  '出来事': '일, 사건',
  '手順': '순서',
  '手続き': '절차',
  '徹底': '철저',
  '撤退': '철퇴',
  '鉄道': '철도',
  '手間': '수고',
  '照らす': '비추다',
  '照る': '빛나다',
  '展開': '전개',
  '伝記': '전기',
  '伝説': '전설',
  '天候': '날씨',
  '点数': '점수',
  '伝統': '전통',
  '展望': '전망',
  '天然': '천연',
  '度': '도',
  '問い合わせる': '문의하다',
  '同一': '동일',
  '統一': '통일',
  '同意': '동의',
  '投資': '투자',
  '同時': '동시',
  '登場': '등장',
  '同情': '동정',
  '当然': '당연히',
  '到達': '도달',
  '当日': '당일',
  '逃亡': '도망',
  '討論': '토론',
  '通す': '통과시키다',
  '通り': '거리',
  '通る': '통과하다',
  '溶かす': '녹이다',
  '解く': '풀다',
  '特殊': '특수한',
  '特徴': '특징',
  '特定': '특정',
  '独特': '독특한',
  '得意': '잘하는',
  '溶ける': '녹다',
  '届け': '신고',
  '届け出': '신고',
  '閉じ込める': '가두다',
  '閉じる': '닫다',
  '飛ばす': '날리다',
  '飛び込む': '뛰어들다',
  '飛び出す': '튀어나오다',
  '泊める': '재우다',
  '富む': '부유하다',
  '留まる': '머무르다',
  '留める': '붙들다',
  '捕らえる': '붙잡다',
  '努力': '노력',
  '鈍い': '둔한',
  '内科': '내과',
  '内部': '내부',
  '内容': '내용',
  '内面': '내면',
  '仲直り': '화해',
  '眺め': '전망',
  '眺める': '바라보다',
  '長引く': '길어지다',
  '流す': '흘리다',
  '流れ': '흐름',
  '流れる': '흐르다',
  '慰める': '위로하다',
  '投げ出す': '내던지다',
  '嘆く': '한탄하다',
  '謎': '수수께끼',
  '撫でる': '쓰다듬다',
  '何故': '왜',
  '懐かしい': '그리운',
  '納得': '납득',
  '名付ける': '이름 짓다',
  '生意気': '건방진',
  '鍋': '냄비',
  '怠ける': '게으르다',
  '鳴らす': '울리다',
  '並': '보통',
  '悩み': '고민',
  '縄': '밧줄',
  '担う': '담당하다',
  '肉体': '육체',
  '逃す': '놓치다',
  '憎い': '미운',
  '憎しみ': '증오',
  '憎む': '미워하다',
  '濁る': '탁하다',
  '逃れる': '도망치다',
  '煮る': '끓이다',
  '縫う': '꿰매다',
  '抜かす': '빼다',
  '抜ける': '빠지다',
  '温める': '데우다',
  '濡らす': '적시다',
  '狙う': '노리다',
  '値上がり': '값 오름',
  '値上げ': '인상',
  '値下がり': '값 내림',
  '値下げ': '인하',
  '願い': '소원',
  '願う': '바라다',
  '寝かせる': '재우다',
  '根気': '끈기',
  '熱する': '가열하다',
  '熱中': '열중',
  '熱帯': '열대',
  '狙い': '목표',
  '年間': '연간',
  '年月': '세월',
  '年代': '연대',
  '年度': '연도',
  '能力': '능력',
  '農業': '농업',
  '農村': '농촌',
  '農民': '농민',
  '残す': '남기다',
  '残り': '나머지',
  '除く': '제외하다',
  '望み': '희망',
  '望む': '바라다',
  '伸ばす': '늘리다',
  '延びる': '연기되다',
  '伸びる': '늘어나다',
  '述べる': '말하다',
  '登る': '오르다',
  '昇る': '떠오르다',
  '飲み込む': '삼키다',
  '乗り越える': '넘다',
  '乗り込む': '올라타다',
  '呪い': '저주',
  '呪う': '저주하다',
  '把握': '파악',
  '配達': '배달',
  '廃止': '폐지',
  '敗北': '패배',
  '這う': '기다',
  '博士': '박사',
  '爆発': '폭발',
  '励ます': '격려하다',
  '励む': '힘쓰다',
  '外れる': '벗어나다',
  '恥': '부끄러움',
  '弾く': '튀기다',
  '挟む': '끼우다',
  '恥じる': '부끄러워하다',
  '果たす': '이루다',
  '果たして': '과연',
  '発揮': '발휘',
  '発見': '발견',
  '発行': '발행',
  '発車': '출발',
  '発想': '발상',
  '発達': '발달',
  '発展': '발전',
  '発売': '발매',
  '発明': '발명',
  '花火': '불꽃놀이',
  '離す': '떼다',
  '放す': '놓아주다',
  '離れる': '떨어지다',
  '省く': '생략하다',
  '跳ねる': '튀다',
  '幅': '폭',
  '浜': '해변',
  '早める': '앞당기다',
  '払い込む': '납입하다',
  '払い戻す': '환불하다',
  '腹': '배',
  '範囲': '범위',
  '反映': '반영',
  '判決': '판결',
  '判子': '도장',
  '犯罪': '범죄',
  '判断': '판단',
  '反抗': '반항',
  '反省': '반성',
  '半島': '반도',
  '販売': '판매',
  '反発': '반발',
  '判明': '판명',
  '番目': '번째',
  '万一': '만일',
  '被害': '피해',
  '引き受ける': '맡다',
  '引き起こす': '일으키다',
  '引き止める': '만류하다',
  '引き取る': '인수하다',
  '引っ掛かる': '걸리다',
  '引っ掛ける': '걸다',
  '引っ張る': '당기다',
  '等しい': '동등한',
  '額': '액수',
  '肥える': '살찌다',
  '控える': '삼가다',
  '秘密': '비밀',
  '評価': '평가',
  '表現': '표현',
  '評判': '평판',
  '表面': '표면',
  '比率': '비율',
  '広がる': '퍼지다',
  '広げる': '넓히다',
  '広まる': '퍼지다',
  '広める': '퍼뜨리다',
  '品質': '품질',
  '貧乏': '가난',
  '敷く': '깔다',
  '含める': '포함시키다',
  '膨らむ': '부풀다',
  '膨れる': '부풀다',
  '更ける': '깊어지다',
  '老ける': '늙다',
  '不思議': '신기한',
  '防ぐ': '막다',
  '塞ぐ': '막다',
  '負担': '부담',
  '普段': '평소',
  '復活': '부활',
  '復旧': '복구',
  '複数': '복수',
  '物価': '물가',
  '物質': '물질',
  '物理': '물리',
  '踏まえる': '근거로 하다',
  '踏み切る': '결단하다',
  '振り向く': '돌아보다',
  '震える': '떨다',
  '触れる': '닿다',
  '噴火': '분화',
  '分解': '분해',
  '文献': '문헌',
  '分析': '분석',
  '分野': '분야',
  '分布': '분포',
  '文明': '문명',
  '分離': '분리',
  '分類': '분류',
  '分裂': '분열',
  '平均': '평균',
  '閉会': '폐회',
  '平凡': '평범한',
  '減らす': '줄이다',
  '偏る': '치우치다',
  '変化': '변화',
  '返還': '반환',
  '変更': '변경',
  '変動': '변동',
  '弁護士': '변호사',
  '編集': '편집',
  '返信': '회신',
  '返品': '반품',
  '保育': '보육',
  '法': '법',
  '防衛': '방위',
  '方角': '방향',
  '崩壊': '붕괴',
  '方言': '방언',
  '妨害': '방해',
  '方向': '방향',
  '防止': '방지',
  '方針': '방침',
  '報酬': '보수',
  '宝石': '보석',
  '放送': '방송',
  '法則': '법칙',
  '包帯': '붕대',
  '膨大': '방대한',
  '報道': '보도',
  '訪問': '방문',
  '豊富': '풍부한',
  '吠える': '짖다',
  '保管': '보관',
  '牧場': '목장',
  '保険': '보험',
  '保護': '보호',
  '誇り': '자랑',
  '誇る': '자랑하다',
  '保守': '보수',
  '干す': '말리다',
  '欲しがる': '원하다',
  '保証': '보증',
  '補助': '보조',
  '保存': '보존',
  '滅びる': '멸망하다',
  '滅ぼす': '멸망시키다',
  '掘る': '파다',
  '彫る': '새기다',
  '惚れる': '반하다',
  '本格': '본격',
  '本人': '본인',
  '本能': '본능',
  '本来': '본래'
};

// Apply translations
const n3Path = path.join(__dirname, '..', 'src', 'data', 'words', 'n3.ts');
let content = fs.readFileSync(n3Path, 'utf-8');
let updatedCount = 0;

for (const [expression, korean] of Object.entries(n3Translations)) {
  const escapedExp = expression.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  const escapedKorean = korean.replace(/'/g, "\\'");

  const checkPattern = new RegExp(
    `\\{ expression: '${escapedExp}', reading: '[^']+', meaning: '[^']+'(, meaningKo: '[^']+')?`,
    'g'
  );

  const matches = content.match(checkPattern);
  if (matches) {
    for (const match of matches) {
      if (!match.includes('meaningKo')) {
        const pattern = new RegExp(
          `(\\{ expression: '${escapedExp}', reading: '[^']+', meaning: '[^']+')( \\})`,
          'g'
        );
        const newContent = content.replace(pattern, `$1, meaningKo: '${escapedKorean}'$2`);
        if (newContent !== content) {
          content = newContent;
          updatedCount++;
        }
      }
    }
  }
}

fs.writeFileSync(n3Path, content);

// Count total
const n3Total = (content.match(/meaningKo/g) || []).length;
console.log(`N3: Added ${updatedCount} more, total: ${n3Total}/2140 (${Math.round(n3Total/2140*100)}%)`);

// Overall count
const n5Content = fs.readFileSync(path.join(__dirname, '..', 'src', 'data', 'words', 'n5.ts'), 'utf-8');
const n4Content = fs.readFileSync(path.join(__dirname, '..', 'src', 'data', 'words', 'n4.ts'), 'utf-8');
const n5Total = (n5Content.match(/meaningKo/g) || []).length;
const n4Total = (n4Content.match(/meaningKo/g) || []).length;
const total = n5Total + n4Total + n3Total;
console.log(`\nOverall: ${total}/3524 (${Math.round(total/3524*100)}%)`);
