const fs = require('fs');
const path = require('path');

// More translations for all levels
const translations = {
  // N5 remaining
  '～時': '~시',
  '～時間': '~시간',
  '～週間': '~주일',
  '～人': '~명',
  '～台': '~대',
  '～枚': '~장',
  '～本': '~개 (긴 것)',
  '～杯': '~잔',
  '～匹': '~마리',
  '～頭': '~마리 (큰 동물)',
  '～着': '~벌',
  '～足': '~켤레',
  '～番': '~번',
  'エレベーター': '엘리베이터',
  'カレンダー': '달력',
  'ギター': '기타',
  'クラス': '반',
  'グラム': '그램',
  'コート': '코트',
  'スプーン': '숟가락',
  'スポーツ': '스포츠',
  'スリッパ': '슬리퍼',
  'セーター': '스웨터',
  'ゼロ': '영',
  'テスト': '시험',
  'テレビ': '텔레비전',
  'ニュース': '뉴스',
  'ノート': '노트',
  'パーティー': '파티',
  'ハンカチ': '손수건',
  'フィルム': '필름',
  'プール': '수영장',
  'フォーク': '포크',
  'ページ': '페이지',
  'ベッド': '침대',
  'ペン': '펜',
  'ボタン': '버튼',
  'ホテル': '호텔',
  'ポケット': '주머니',
  'マッチ': '성냥',
  'メートル': '미터',
  'ラジオ': '라디오',
  'レコード': '레코드',
  'レストラン': '레스토랑',
  'ワイシャツ': '와이셔츠',

  // N4 remaining
  'アルバイト': '아르바이트',
  'エスカレーター': '에스컬레이터',
  'オートバイ': '오토바이',
  'ガソリン': '가솔린',
  'カーテン': '커튼',
  'サラリーマン': '샐러리맨',
  'スクリーン': '스크린',
  'ステレオ': '스테레오',
  'タイプ': '타입',
  'チェック': '체크',
  'テキスト': '텍스트',
  'ファックス': '팩스',
  'プラス': '플러스',
  'マイナス': '마이너스',
  'ルール': '룰',
  'レベル': '레벨',
  'レポート': '리포트',

  // N3 more
  '問い': '질문',
  '問う': '묻다',
  '同': '동',
  '動': '동',
  '道': '길',
  '堂': '당',
  '同意': '동의',
  '同一': '동일',
  '統一': '통일',
  '導入': '도입',
  '投票': '투표',
  '到着': '도착',
  '当然': '당연히',
  '当時': '당시',
  '到達': '도달',
  '当日': '당일',
  '東西': '동서',
  '東京': '도쿄',
  '当面': '당면',
  '動機': '동기',
  '同級生': '동급생',
  '同期': '동기',
  '同居': '동거',
  '同士': '동료',
  '同時': '동시',
  '同情': '동정',
  '道場': '도장',
  '登場': '등장',
  '同僚': '동료',
  '動力': '동력',
  '動揺': '동요',
  '読書': '독서',
  '独自': '독자적인',
  '独身': '독신',
  '独特': '독특한',
  '独立': '독립',
  '毒': '독',
  '特殊': '특수한',
  '特徴': '특징',
  '特定': '특정',
  '特別': '특별한',
  '溶かす': '녹이다',
  '溶く': '녹이다',
  '溶ける': '녹다',
  '解く': '풀다',
  '説く': '설명하다',
  '届け': '신고',
  '届く': '닿다',
  '届ける': '전달하다',
  '整う': '갖추어지다',
  '整える': '정돈하다',
  '留まる': '머무르다',
  '留める': '붙들다',
  '泊める': '재우다',
  '富む': '부유하다',
  '飛ばす': '날리다',
  '飛び込む': '뛰어들다',
  '飛び出す': '튀어나오다',
  '飛ぶ': '날다',
  '閉じ込める': '가두다',
  '閉じる': '닫다',
  '取り上げる': '다루다',
  '取り入れる': '도입하다',
  '取り扱う': '취급하다',
  '取り消す': '취소하다',
  '取り出す': '꺼내다',
  '取り戻す': '되찾다',
  '努力': '노력',
  '鈍い': '둔한',
  '内': '안',
  '内科': '내과',
  '内閣': '내각',
  '内心': '속마음',
  '内臓': '내장',
  '内部': '내부',
  '内容': '내용',
  '内面': '내면',
  '仲直り': '화해',
  '永い': '긴',
  '眺め': '전망',
  '眺める': '바라보다',
  '長引く': '길어지다',
  '流す': '흘리다',
  '流れ': '흐름',
  '流れる': '흐르다',
  '慰める': '위로하다',
  '投げ出す': '내던지다',
  '嘆く': '한탄하다',
  '謎': '수수께끼',
  '撫でる': '쓰다듬다',
  '何故': '왜',
  '懐かしい': '그리운',
  '納得': '납득',
  '名付ける': '이름 짓다',
  '生': '날것',
  '生意気': '건방진',
  '鍋': '냄비',
  '怠ける': '게으르다',
  '鳴らす': '울리다',
  '並': '보통',
  '悩み': '고민',
  '縄': '밧줄',
  '軟らかい': '부드러운',
  '担う': '담당하다',
  '肉体': '육체',
  '逃す': '놓치다',
  '憎い': '미운',
  '憎しみ': '증오',
  '憎む': '미워하다',
  '濁る': '탁하다',
  '逃れる': '도망치다',
  '二度': '두 번',
  '煮る': '끓이다',
  '縫う': '꿰매다',
  '抜かす': '빼다',
  '抜ける': '빠지다',
  '温める': '데우다',
  '濡らす': '적시다',
  '狙う': '노리다',
  '練る': '연습하다',
  '値上がり': '값 오름',
  '値上げ': '인상',
  '値下がり': '값 내림',
  '値下げ': '인하',
  '願い': '소원',
  '願う': '바라다',
  '寝かせる': '재우다',
  '根気': '끈기',
  '熱する': '가열하다',
  '熱中': '열중',
  '熱帯': '열대',
  '狙い': '목표',
  '年間': '연간',
  '年月': '세월',
  '年代': '연대',
  '年度': '연도',
  '能': '능',
  '能力': '능력',
  '農': '농',
  '農家': '농가',
  '農業': '농업',
  '農産物': '농산물',
  '農村': '농촌',
  '農民': '농민',
  '濃度': '농도',
  '残す': '남기다',
  '残り': '나머지',
  '除く': '제외하다',
  '望み': '희망',
  '望む': '바라다',
  '伸ばす': '늘리다',
  '延びる': '연기되다',
  '延べる': '늘이다',
  '伸びる': '늘어나다',
  '述べる': '말하다',
  '上る': '오르다',
  '登る': '오르다',
  '昇る': '떠오르다',
  '飲み込む': '삼키다',
  '乗り越える': '넘다',
  '乗り込む': '올라타다',
  '呪い': '저주',
  '呪う': '저주하다',
  '把握': '파악',
  '配達': '배달',
  '配布': '배포',
  '配慮': '배려',
  '配列': '배열',
  '廃止': '폐지',
  '敗北': '패배',
  '這う': '기다',
  '博士': '박사',
  '爆発': '폭발',
  '励ます': '격려하다',
  '励む': '힘쓰다',
  '外れる': '벗어나다',
  '恥': '부끄러움',
  '恥じる': '부끄러워하다',
  '挟む': '끼우다',
  '果たす': '이루다',
  '果たして': '과연',
  '発揮': '발휘',
  '発見': '발견',
  '発言': '발언',
  '発行': '발행',
  '発車': '출발',
  '発生': '발생',
  '発想': '발상',
  '発達': '발달',
  '発展': '발전',
  '発売': '발매',
  '発明': '발명',
  '花火': '불꽃놀이',
  '離す': '떼다',
  '放す': '놓아주다',
  '離れる': '떨어지다',
  '省く': '생략하다',
  '跳ねる': '튀다',
  '幅': '폭',
  '浜': '해변',
  '早まる': '빨라지다',
  '早める': '앞당기다',
  '払い込む': '납입하다',
  '払い戻す': '환불하다',
  '腹': '배',
  '範囲': '범위',
  '反映': '반영',
  '判決': '판결',
  '犯罪': '범죄',
  '判断': '판단',
  '反抗': '반항',
  '反省': '반성',
  '半島': '반도',
  '販売': '판매',
  '反発': '반발',
  '半分': '반',
  '判明': '판명',
  '番目': '번째',
  '万一': '만일',
  '被害': '피해',
  '引き受ける': '맡다',
  '引き起こす': '일으키다',
  '引き止める': '만류하다',
  '引き取る': '인수하다',
  '引っ掛かる': '걸리다',
  '引っ掛ける': '걸다',
  '引っ張る': '당기다',
  '等しい': '동등한',
  '肥える': '살찌다',
  '控える': '삼가다',
  '秘密': '비밀',
  '評価': '평가',
  '表現': '표현',
  '評判': '평판',
  '表面': '표면',
  '比率': '비율',
  '広がる': '퍼지다',
  '広げる': '넓히다',
  '広まる': '퍼지다',
  '広める': '퍼뜨리다',
  '品': '물건',
  '品質': '품질',
  '貧乏': '가난',
  '敷く': '깔다',
  '含める': '포함시키다',
  '膨らむ': '부풀다',
  '膨れる': '부풀다',
  '更ける': '깊어지다',
  '老ける': '늙다',
  '不': '불',
  '部': '부',
  '不安': '불안',
  '風景': '풍경',
  '風俗': '풍속',
  '夫婦': '부부',
  '部分': '부분',
  '普及': '보급',
  '不況': '불황',
  '不具合': '불량',
  '服装': '복장',
  '副': '부',
  '複写': '복사',
  '復習': '복습',
  '不思議': '신기한',
  '防ぐ': '막다',
  '塞ぐ': '막다',
  '負担': '부담',
  '普段': '평소',
  '復活': '부활',
  '復旧': '복구',
  '仏': '부처',
  '物価': '물가',
  '物質': '물질',
  '物体': '물체',
  '物理': '물리',
  '踏まえる': '근거로 하다',
  '踏み切る': '결단하다',
  '振り向く': '돌아보다',
  '震える': '떨다',
  '触れる': '닿다',
  '噴火': '분화',
  '分解': '분해',
  '文献': '문헌',
  '分析': '분석',
  '分野': '분야',
  '分布': '분포',
  '文明': '문명',
  '分離': '분리',
  '分類': '분류',
  '分裂': '분열',
  '平均': '평균',
  '閉会': '폐회',
  '平凡': '평범한',
  '減らす': '줄이다',
  '偏る': '치우치다',
  '変化': '변화',
  '返還': '반환',
  '変更': '변경',
  '変動': '변동',
  '弁護士': '변호사',
  '編集': '편집',
  '返信': '회신',
  '返品': '반품',
  '保育': '보육',
  '法': '법',
  '防衛': '방위',
  '方角': '방향',
  '崩壊': '붕괴',
  '方言': '방언',
  '妨害': '방해',
  '方向': '방향',
  '防止': '방지',
  '方針': '방침',
  '報酬': '보수',
  '宝石': '보석',
  '放送': '방송',
  '法則': '법칙',
  '包帯': '붕대',
  '膨大': '방대한',
  '報道': '보도',
  '訪問': '방문',
  '豊富': '풍부한',
  '吠える': '짖다',
  '保管': '보관',
  '牧場': '목장',
  '保険': '보험',
  '保護': '보호',
  '誇り': '자랑',
  '誇る': '자랑하다',
  '保守': '보수',
  '干す': '말리다',
  '欲しがる': '원하다',
  '保証': '보증',
  '補助': '보조',
  '保存': '보존',
  '滅びる': '멸망하다',
  '滅ぼす': '멸망시키다',
  '掘る': '파다',
  '彫る': '새기다',
  '惚れる': '반하다',
  '本格': '본격',
  '本人': '본인',
  '本能': '본능',
  '本来': '본래',
  '埋める': '묻다',
  '舞う': '춤추다',
  '前もって': '미리',
  '任せる': '맡기다',
  '巻く': '감다',
  '負かす': '이기다',
  '曲げる': '구부리다',
  '混ざる': '섞이다',
  '混ぜる': '섞다',
  '増す': '늘다',
  '先ず': '우선',
  '貧しい': '가난한',
  '眩しい': '눈부신',
  '又': '또',
  '股': '허벅지',
  '間違い': '실수',
  '間違う': '틀리다',
  '待ち合わせる': '만나기로 하다',
  '松': '소나무',
  'まとまる': '정리되다',
  'まとめる': '정리하다',
  '招く': '초대하다',
  '学ぶ': '배우다',
  '回す': '돌리다',
  '満足': '만족',
  '見送る': '배웅하다',
  '見落とす': '간과하다',
  '見掛ける': '발견하다',
  '右側': '오른쪽',
  '見込み': '전망',
  '惨め': '비참한',
  '満たす': '채우다',
  '乱れる': '흐트러지다',
  '導く': '이끌다',
  '密': '밀접한',
  '見詰める': '응시하다',
  '認める': '인정하다',
  '見直す': '재검토하다',
  '見舞う': '문병하다',
  '見守る': '지켜보다',
  '民間': '민간',
  '民主': '민주',
  '民族': '민족',
  '迎える': '맞이하다',
  '報いる': '보답하다',
  '無視': '무시',
  '結ぶ': '맺다',
  '無駄': '낭비',
  '無断': '무단',
  '夢中': '열중',
  '胸': '가슴',
  '無料': '무료',
  '明確': '명확한',
  '命じる': '명하다',
  '命ずる': '명하다',
  '名称': '명칭',
  '迷惑': '폐',
  '恵む': '베풀다',
  '目立つ': '눈에 띄다',
  '滅多に': '좀처럼',
  '免許': '면허',
  '面積': '면적',
  '面倒': '귀찮은',
  '設ける': '설치하다',
  '目撃': '목격',
  '目次': '목차',
  '目的': '목적',
  '目標': '목표',
  '潜る': '잠수하다',
  '持ち上げる': '들어올리다',
  '用いる': '사용하다',
  'もったいない': '아깝다',
  '最も': '가장',
  '求める': '요구하다',
  '元': '원래',
  '基づく': '근거하다',
  '物語': '이야기',
  '物語る': '말하다',
  '物事': '일',
  'もらう': '받다',
  '盛る': '담다',
  '漏れる': '새다',
  '約': '약',
  '役割': '역할',
  '安らぐ': '편안해지다',
  '休める': '쉬게 하다',
  '易い': '쉬운',
  '雇う': '고용하다',
  'やっと': '겨우',
  '宿': '숙소',
  '養う': '기르다',
  '止む': '그치다',
  '辞める': '그만두다',
  '唯一': '유일한',
  '有効': '유효한',
  '友好': '우호',
  '勇気': '용기',
  '優秀': '우수한',
  '有望': '유망한',
  '有利': '유리한',
  '有力': '유력한',
  '緩い': '느슨한',
  '許す': '허락하다',
  '輸送': '수송',
  '豊か': '풍요로운',
  '揺らぐ': '흔들리다',
  '要因': '요인',
  '幼児': '유아',
  '用心': '조심',
  '要する': '필요로 하다',
  '要請': '요청',
  '要素': '요소',
  '容易': '용이한',
  '幼稚': '유치한',
  '養成': '양성',
  '要点': '요점',
  '容認': '용인',
  '要望': '요망',
  '予期': '예기',
  '予算': '예산',
  '寄せる': '다가가다',
  '余分': '여분',
  '予報': '예보',
  '読み取る': '읽어내다',
  '予約': '예약',
  '因る': '의하다',
  '喜び': '기쁨',
  '弱まる': '약해지다',
  '弱める': '약화시키다',
  '弱る': '약해지다',
  '理解': '이해',
  '利益': '이익',
  '陸': '육지',
  '離婚': '이혼',
  '利子': '이자',
  '理想': '이상',
  '利点': '장점',
  '理念': '이념',
  '了解': '양해',
  '量': '양',
  '料金': '요금',
  '領収': '영수',
  '利率': '이율',
  '倫理': '윤리',
  '類': '류, 종류',
  '例外': '예외',
  '冷却': '냉각',
  '礼儀': '예의',
  '冷静': '냉정한',
  '冷凍': '냉동',
  '列': '줄',
  '連休': '연휴',
  '連合': '연합',
  '連続': '연속',
  '老人': '노인',
  '労働': '노동',
  '浪費': '낭비',
  '漏れ': '누수',
  '論': '논',
  '論じる': '논하다',
  '論争': '논쟁',
  '論文': '논문',
  '論理': '논리',
  '和解': '화해',
  '枠': '틀',
  '湧く': '솟다',
  '分ける': '나누다',
  '技': '기술',
  '笑い': '웃음',
  '割り当てる': '할당하다'
};

// Apply to all files
function applyToFile(filePath, translations) {
  let content = fs.readFileSync(filePath, 'utf-8');
  let updatedCount = 0;

  for (const [expression, korean] of Object.entries(translations)) {
    const escapedExp = expression.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    const escapedKorean = korean.replace(/'/g, "\\'");

    const checkPattern = new RegExp(
      `\\{ expression: '${escapedExp}', reading: '[^']+', meaning: '[^']+'(, meaningKo: '[^']+')?`,
      'g'
    );

    const matches = content.match(checkPattern);
    if (matches) {
      for (const match of matches) {
        if (!match.includes('meaningKo')) {
          const pattern = new RegExp(
            `(\\{ expression: '${escapedExp}', reading: '[^']+', meaning: '[^']+')( \\})`,
            'g'
          );
          const newContent = content.replace(pattern, `$1, meaningKo: '${escapedKorean}'$2`);
          if (newContent !== content) {
            content = newContent;
            updatedCount++;
          }
        }
      }
    }
  }

  fs.writeFileSync(filePath, content);
  return updatedCount;
}

const n5Path = path.join(__dirname, '..', 'src', 'data', 'words', 'n5.ts');
const n4Path = path.join(__dirname, '..', 'src', 'data', 'words', 'n4.ts');
const n3Path = path.join(__dirname, '..', 'src', 'data', 'words', 'n3.ts');

const n5Count = applyToFile(n5Path, translations);
const n4Count = applyToFile(n4Path, translations);
const n3Count = applyToFile(n3Path, translations);

console.log(`Added: N5=${n5Count}, N4=${n4Count}, N3=${n3Count}`);

// Count totals
const n5Content = fs.readFileSync(n5Path, 'utf-8');
const n4Content = fs.readFileSync(n4Path, 'utf-8');
const n3Content = fs.readFileSync(n3Path, 'utf-8');

const n5Total = (n5Content.match(/meaningKo/g) || []).length;
const n4Total = (n4Content.match(/meaningKo/g) || []).length;
const n3Total = (n3Content.match(/meaningKo/g) || []).length;

console.log(`\nFinal totals:`);
console.log(`N5: ${n5Total}/718 (${Math.round(n5Total/718*100)}%)`);
console.log(`N4: ${n4Total}/666 (${Math.round(n4Total/666*100)}%)`);
console.log(`N3: ${n3Total}/2140 (${Math.round(n3Total/2140*100)}%)`);
console.log(`Total: ${n5Total + n4Total + n3Total}/3524 (${Math.round((n5Total + n4Total + n3Total)/3524*100)}%)`);
